/*
Template Name: HUD - Responsive Bootstrap 5 Admin Template
Version: 1.3.0
Author: Sean Ngu
Website: http://www.seantheme.com/hud/
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
	01. Global Variable
	02. Handle Scrollbar
	03. Handle Header Search Bar
	04. Handle Sidebar Menu
	05. Handle Sidebar Minify
	06. Handle Sidebar Minify Float Menu
	07. Handle Dropdown Close Option
	08. Handle Panel - Remove / Reload / Collapse / Expand
	09. Handle Tooltip & Popover Activation
	10. Handle Scroll to Top Button Activation
	11. Handle hexToRgba
	12. Handle Scroll to

	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/



/* 01. Global Variable
------------------------------------------------ */

var app = {
	id: '#app',
	isMobile: ((/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) || window.innerWidth < 992),
	bootstrap: {
		tooltip: {
			attr: 'data-bs-toggle="tooltip"'
		},
		popover: {
			attr: 'data-bs-toggle="popover"'
		},
		modal: {
			attr: 'data-bs-toggle="modal"',
			dismissAttr: 'data-bs-dismiss="modal"',
			event: {
				hidden: 'hidden.bs.modal'
			}
		},
		nav: {
			class: 'nav',
			tabs: {
				class: 'nav-tabs',
				activeClass: 'active',
				itemClass: 'nav-item',
				itemLinkClass: 'nav-link'
			}
		}
	},
	header: {
		id: '#header',
		class: 'app-header',
		hasScrollClass: 'has-scroll'
	},
	sidebar: {
		id: '#sidebar',
		class: 'app-sidebar',
		scrollBar: {
			localStorage: 'appSidebarScrollPosition',
			dom: ''
		},
		menu: {
			class: 'menu',
			animationTime: 0,
			itemClass: 'menu-item',
			itemLinkClass: 'menu-link',
			hasSubClass: 'has-sub',
			activeClass: 'active',
			expandingClass: 'expanding',
			expandClass: 'expand',
			submenu: {
				class: 'menu-submenu',
			}
		},
		mobile: {
			toggleAttr: 'data-toggle="app-sidebar-mobile"',
			dismissAttr: 'data-dismiss="app-sidebar-mobile"',
			toggledClass: 'app-sidebar-mobile-toggled',
			closedClass: 'app-sidebar-mobile-closed',
			backdrop: {
				class: 'app-sidebar-mobile-backdrop'
			}
		},
		minify: {
			toggleAttr: 'data-toggle="app-sidebar-minify"',
			toggledClass: 'app-sidebar-minified',
			cookieName: 'app-sidebar-minified'
		},
		floatSubmenu: {
			id: '#app-sidebar-float-submenu',
			dom: '',
			timeout: '',
			class: 'app-sidebar-float-submenu',
			container: {
				class: 'app-sidebar-float-submenu-container'
			},
			arrow: {
				id: '#app-sidebar-float-submenu-arrow',
				class: 'app-sidebar-float-submenu-arrow'
			},
			line: {
				id: '#app-sidebar-float-submenu-line',
				class: 'app-sidebar-float-submenu-line'
			},
			overflow: {
				class: 'overflow-scroll mh-100vh'
			}
		},
		search: {
			class: 'menu-search',
			toggleAttr: 'data-sidebar-search="true"',
			hideClass: 'd-none',
			foundClass: 'has-text'
		},
		transparent: {
			class: 'app-sidebar-transparent'
		}
	},
	scrollBar: {
		attr: 'data-scrollbar="true"',
		skipMobileAttr: 'data-skip-mobile',
		initAttr: 'data-init',
		heightAttr: 'data-height',
		wheelPropagationAttr: 'data-wheel-propagation'
	},
	content: {
		id: '#content',
		class: 'app-content',
		fullHeight: {
			class: 'app-content-full-height'
		},
		fullWidth: {
			class: 'app-content-full-width'
		}
	},
	layout: {
		sidebarLight: {
			class: 'app-with-light-sidebar'
		},
		sidebarEnd: {
			class: 'app-with-end-sidebar'
		},
		sidebarWide: {
			class: 'app-with-wide-sidebar'
		},
		sidebarMinified: {
			class: 'app-sidebar-minified'
		},
		sidebarTwo: {
			class: 'app-with-two-sidebar'
		},
		withoutHeader: {
			class: 'app-without-header'
		},
		withoutSidebar: {
			class: 'app-without-sidebar'
		},
		topMenu: {
			class: 'app-with-top-menu'
		},
		boxedLayout: {
			class: 'boxed-layout'
		}
	},
	scrollToTopBtn: {
		showClass: 'show',
		heightShow: 200,
		toggleAttr: 'data-toggle="scroll-to-top"',
		scrollSpeed: 500
	},
	scrollTo: {
		attr: 'data-toggle="scroll-to"',
		target: 'data-target',
		linkTarget: 'href'
	},
	// themePanel: {
	// 	class: 'app-theme-panel',
	// 	toggleAttr: 'data-toggle="theme-panel-expand"',
	// 	cookieName: 'app-theme-panel-expand',
	// 	activeClass: 'active',
	// 	themeListCLass: 'app-theme-list',
	// 	themeListItemCLass: 'app-theme-list-item',
	// 	themeCoverClass: 'app-theme-cover',
	// 	themeCoverItemCLass: 'app-theme-cover-item',
	// 	theme: {
	// 		toggleAttr: 'data-toggle="theme-selector"',
	// 		classAttr: 'data-theme-class',
	// 		cookieName: 'app-theme',
	// 		activeClass: 'active'
	// 	},
	// 	themeCover: {
	// 		toggleAttr: 'data-toggle="theme-cover-selector"',
	// 		classAttr: 'data-theme-cover-class',
	// 		cookieName: 'app-theme-cover',
	// 		activeClass: 'active'
	// 	}
	// },
	dismissClass: {
		toggleAttr: 'data-dismiss-class',
		targetAttr: 'data-dismiss-target'
	},
	toggleClass: {
		toggleAttr: 'data-toggle-class',
		targetAttr: 'data-toggle-target'
	},
	font: {
		family: getComputedStyle(document.body).getPropertyValue('--bs-body-font-family'),
		size: getComputedStyle(document.body).getPropertyValue('--bs-body-font-size'),
		weight: getComputedStyle(document.body).getPropertyValue('--bs-body-font-weight')
	},
	color: {
		theme: getComputedStyle(document.body).getPropertyValue('--bs-theme'),
		blue: getComputedStyle(document.body).getPropertyValue('--bs-blue'),
		green: getComputedStyle(document.body).getPropertyValue('--bs-green'),
		orange: getComputedStyle(document.body).getPropertyValue('--bs-orange'),
		red: getComputedStyle(document.body).getPropertyValue('--bs-red'),
		cyan: getComputedStyle(document.body).getPropertyValue('--bs-cyan'),
		purple: getComputedStyle(document.body).getPropertyValue('--bs-purple'),
		yellow: getComputedStyle(document.body).getPropertyValue('--bs-yellow'),
		indigo: getComputedStyle(document.body).getPropertyValue('--bs-indigo'),
		pink: getComputedStyle(document.body).getPropertyValue('--bs-pink'),
		black: getComputedStyle(document.body).getPropertyValue('--bs-black'),
		white: getComputedStyle(document.body).getPropertyValue('--bs-white'),
		gray: getComputedStyle(document.body).getPropertyValue('--bs-gray'),
		dark: getComputedStyle(document.body).getPropertyValue('--bs-dark'),
		gray100: getComputedStyle(document.body).getPropertyValue('--bs-gray-100'),
		gray200: getComputedStyle(document.body).getPropertyValue('--bs-gray-200'),
		gray300: getComputedStyle(document.body).getPropertyValue('--bs-gray-300'),
		gray400: getComputedStyle(document.body).getPropertyValue('--bs-gray-400'),
		gray500: getComputedStyle(document.body).getPropertyValue('--bs-gray-500'),
		gray600: getComputedStyle(document.body).getPropertyValue('--bs-gray-600'),
		gray700: getComputedStyle(document.body).getPropertyValue('--bs-gray-700'),
		gray800: getComputedStyle(document.body).getPropertyValue('--bs-gray-800'),
		gray900: getComputedStyle(document.body).getPropertyValue('--bs-gray-900'),

		themeRgb: getComputedStyle(document.body).getPropertyValue('--bs-theme-rgb'),
		blueRgb: getComputedStyle(document.body).getPropertyValue('--bs-blue-rgb'),
		greenRgb: getComputedStyle(document.body).getPropertyValue('--bs-green-rgb'),
		orangeRgb: getComputedStyle(document.body).getPropertyValue('--bs-orange-rgb'),
		redRgb: getComputedStyle(document.body).getPropertyValue('--bs-red-rgb'),
		cyanRgb: getComputedStyle(document.body).getPropertyValue('--bs-cyan-rgb'),
		purpleRgb: getComputedStyle(document.body).getPropertyValue('--bs-purple-rgb'),
		yellowRgb: getComputedStyle(document.body).getPropertyValue('--bs-yellow-rgb'),
		indigoRgb: getComputedStyle(document.body).getPropertyValue('--bs-indigo-rgb'),
		pinkRgb: getComputedStyle(document.body).getPropertyValue('--bs-pink-rgb'),
		blackRgb: getComputedStyle(document.body).getPropertyValue('--bs-black-rgb'),
		whiteRgb: getComputedStyle(document.body).getPropertyValue('--bs-white-rgb'),
		grayRgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-rgb'),
		darkRgb: getComputedStyle(document.body).getPropertyValue('--bs-dark-rgb'),
		gray100Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-100-rgb'),
		gray200Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-200-rgb'),
		gray300Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-300-rgb'),
		gray400Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-400-rgb'),
		gray500Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-500-rgb'),
		gray600Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-600-rgb'),
		gray700Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-700-rgb'),
		gray800Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-800-rgb'),
		gray900Rgb: getComputedStyle(document.body).getPropertyValue('--bs-gray-900-rgb')
	}
};



/* 02. Handle Scrollbar
------------------------------------------------ */

var handleScrollbar = function() {
	"use strict";
	var elms = document.querySelectorAll('['+ app.scrollBar.attr +']');

	for (var i = 0; i < elms.length; i++) {
		generateScrollbar(elms[i])
	}
};
var generateScrollbar = function(elm) {
  "use strict";

	if ($(elm).attr(app.scrollBar.initAttr) || (app.isMobile && $(elm).attr(app.scrollBar.skipMobileAttr))) {
		return;
	}
	var dataHeight = (!$(elm).attr(app.scrollBar.heightAttr)) ? $(elm).height() : $(elm).attr(app.scrollBar.heightAttr);

	$(elm).css('height', dataHeight);

	if(app.isMobile) {
		$(elm).css('overflow-x','scroll');
	} else {
		var dataWheelPropagation = ($(elm).attr(app.scrollBar.wheelPropagationAttr)) ? $(elm).attr(app.scrollBar.wheelPropagationAttr) : false;

		if ($(elm).closest('.'+ app.sidebar.class).length !== 0) {
			app.sidebar.scrollBar.dom = new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		} else {
			new PerfectScrollbar(elm, {
				wheelPropagation: dataWheelPropagation
			});
		}
	}
	$(elm).attr(app.scrollBar.initAttr, true);
};



/* 03. Handle Sidebar Menu
------------------------------------------------ */

var handleSidebarMenu = function() {
	"use strict";
	$(document).on('click', '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass, function(e) {
		e.preventDefault();

		var target = $(this).next('.'+ app.sidebar.menu.submenu.class);
		var otherMenu = $('.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.submenu.class).not(target);

		$(otherMenu).slideUp(app.sidebar.menu.animationTime);
		$(otherMenu).closest('.'+ app.sidebar.menu.itemClass).removeClass(app.sidebar.menu.expandClass);

		$(target).slideToggle(app.sidebar.menu.animationTime);
		var targetElm = $(target).closest('.'+ app.sidebar.menu.itemClass);
		if ($(targetElm).hasClass(app.sidebar.menu.expandClass)) {
			$(targetElm).removeClass(app.sidebar.menu.expandClass);
		} else {
			$(targetElm).addClass(app.sidebar.menu.expandClass);
		}
	});
	$(document).on('click', '.'+ app.sidebar.class +' .'+ app.sidebar.menu.class +' > .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' .'+ app.sidebar.menu.submenu.class +' .'+ app.sidebar.menu.itemClass +'.'+ app.sidebar.menu.hasSubClass +' > .'+ app.sidebar.menu.itemLinkClass, function(e) {
		e.preventDefault();

		var target = $(this).next('.' + app.sidebar.menu.submenu.class);
		$(target).slideToggle(app.sidebar.menu.animationTime);
	});
};



/* 04. Handle Sidebar Scroll Memory
------------------------------------------------ */

var handleSidebarScrollMemory = function() {
	if (!app.isMobile) {
		try {
			if (typeof(Storage) !== 'undefined' && typeof(localStorage) !== 'undefined') {
				$('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']').on('scroll', function() {
					localStorage.setItem(app.sidebar.scrollBar.localStorage, $(this).scrollTop());
				});

				var defaultScroll = localStorage.getItem(app.sidebar.scrollBar.localStorage);
				if (defaultScroll) {
					$('.'+ app.sidebar.class +' ['+ app.scrollBar.attr +']').animate({ scrollTop: defaultScroll + 'px'}, 0);
				}
			}
		} catch (error) {
			console.log(error);
		}
	}
};



/* 05. Handle Card Action
------------------------------------------------ */

var cardActionRunning = false;
var handleCardAction = function() {
	"use strict";

	if (cardActionRunning) {
		return false;
	}
	cardActionRunning = true;

	// expand
	$(document).on('mouseover', '[data-toggle=card-expand]', function(e) {
		if (!$(this).attr('data-init')) {
			$(this).tooltip({
				title: 'Expand / Compress',
				placement: 'bottom',
				trigger: 'hover',
				container: 'body'
			});
			$(this).tooltip('show');
			$(this).attr('data-init', true);
		}
	});
	$(document).on('click', '[data-toggle=card-expand]', function(e) {
		e.preventDefault();
		var target = $(this).closest('.card');
		var targetBody = $(target).find('.card-body');
		var targetClass = 'card-expand';
		var targetTop = 40;
		if ($(targetBody).length !== 0) {
			var targetOffsetTop = $(target).offset().top;
			var targetBodyOffsetTop = $(targetBody).offset().top;
			targetTop = targetBodyOffsetTop - targetOffsetTop;
		}

		if ($('body').hasClass(targetClass) && $(target).hasClass(targetClass)) {
			$('body, .card').removeClass(targetClass);
			$('.card').removeAttr('style');
			$(targetBody).removeAttr('style');
		} else {
			$('body').addClass(targetClass);
			$(this).closest('.card').addClass(targetClass);
		}
		$(window).trigger('resize');
	});
};



/* 06. Handle Tooltip & Popover Activation
------------------------------------------------ */

var handelTooltipPopoverActivation = function() {
	"use strict";

	if ($('['+ app.bootstrap.tooltip.attr +']').length !== 0) {
		var tooltipTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.tooltip.attr +']'))
		var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
			return new bootstrap.Tooltip(tooltipTriggerEl)
		})
	}
	if ($('['+ app.bootstrap.popover.attr +']').length !== 0) {
		var popoverTriggerList = [].slice.call(document.querySelectorAll('['+ app.bootstrap.popover.attr +']'))
		var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
			return new bootstrap.Popover(popoverTriggerEl)
		})
	}
};



/* 07. Handle Scroll to Top Button
------------------------------------------------ */

var handleScrollToTopButton = function() {
	"use strict";

	$(document).scroll( function() {
		var totalScroll = $(document).scrollTop();

		if (totalScroll >= app.scrollToTopBtn.heightShow) {
			if (!$('['+ app.scrollToTopBtn.toggleAttr +']').hasClass(app.scrollToTopBtn.showClass)) {
				$('['+ app.scrollToTopBtn.toggleAttr +']').addClass(app.scrollToTopBtn.showClass);
			}
		} else {
			$('['+ app.scrollToTopBtn.toggleAttr +']').removeClass(app.scrollToTopBtn.showClass);
		}
	});

	$('['+ app.scrollToTopBtn.toggleAttr +']').click(function(e) {
		e.preventDefault();

		$('html, body').animate({
			scrollTop: $('body').offset().top
		}, app.scrollToTopBtn.scrollSpeed);
	});

};



/* 08. Handle hexToRgba
------------------------------------------------ */

var hexToRgba = function(hex, transparent = 1) {
	var c;
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
			c= hex.substring(1).split('');
			if(c.length== 3){
					c= [c[0], c[0], c[1], c[1], c[2], c[2]];
			}
			c= '0x'+c.join('');
			return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ transparent +')';
	}
  throw new Error('Bad Hex');
};



/* 09. Handle Scroll To
------------------------------------------------ */

var handleScrollTo = function() {
	$(document).on('click', '['+ app.scrollTo.attr +']', function(e) {
		e.preventDefault();

		var targetElm = ($(this).attr(app.scrollTo.target)) ? $(this).attr(app.scrollTo.target) : $(this).attr(app.scrollTo.linkTarget);
		if (targetElm) {
			$('html, body').animate({
				scrollTop: $(targetElm).offset().top - $(app.header.id).height() - 24
			}, 0);
		}
	});
};



/* 10. Handle Page Scroll Class
------------------------------------------------ */

var handlePageScrollClass = function() {
	var checkScroll = function() {
		if ($(window).scrollTop() > 0) {
			$(app.id).addClass(app.header.hasScrollClass);
		} else {
			$(app.id).removeClass(app.header.hasScrollClass);
		}
	}

	$(window).on('scroll', function() {
		checkScroll();
	});

	checkScroll();
};



/* 11. Handle Toggle Class
------------------------------------------------ */

var handleToggleClass = function() {
	$(document).on('click', '['+ app.toggleClass.toggleAttr +']', function(e) {
		e.preventDefault();

		var targetToggleClass = $(this).attr(app.toggleClass.toggleAttr);
		var targetDismissClass = $(this).attr(app.dismissClass.toggleAttr);
		var targetToggleElm = $(this).attr(app.toggleClass.targetAttr);

		if (!targetDismissClass) {
			$(targetToggleElm).toggleClass(targetToggleClass);
		} else {
			if (!$(targetToggleElm).hasClass(targetToggleClass) && !$(targetToggleElm).hasClass(targetDismissClass)) {
				$(targetToggleElm).toggleClass(targetToggleClass);
			} else {
				$(targetToggleElm).toggleClass(targetToggleClass);
				$(targetToggleElm).toggleClass(targetDismissClass);
			}
		}
	});
}



/* 12. Handle Theme Panel
------------------------------------------------ */

var handleThemePanel = function() {
	"use strict";

	// 12.1 Theme Panel - Toggle / Dismiss
	$(document).on('click', '['+ app.themePanel.toggleAttr +']', function() {
		var targetContainer = '.'+ app.themePanel.class;
		var targetExpand = false;

		if ($(targetContainer).hasClass(app.themePanel.activeClass)) {
			$(targetContainer).removeClass(app.themePanel.activeClass);
		} else {
			$(targetContainer).addClass(app.themePanel.activeClass);
			targetExpand = true;
		}
		if (Cookies) {
			Cookies.set(app.themePanel.cookieName, targetExpand);
		}
	});

	// 12.2 Theme Panel - Page Load Cookies
	if (Cookies) {
		var themePanelExpand = Cookies.get(app.themePanel.cookieName);

		if (themePanelExpand == 'true' || typeof themePanelExpand == 'undefined') {
			$('['+ app.themePanel.toggleAttr +']').trigger('click');
		}
	}


	// 12.3 Theme Panel - Theme Selector
	$(document).on('click', '.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']', function() {

		for (var x = 0; x < document.body.classList.length; x++) {
			var targetClass = document.body.classList[x];
			if (targetClass.search('theme-') > -1) {
				$('body').removeClass(targetClass);
			}
		}

		var targetTheme = $(this).attr(app.themePanel.theme.classAttr);

		$('body').addClass(targetTheme);
		$('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']').not(this).closest('.'+ app.themePanel.themeListItemCLass).removeClass(app.themePanel.theme.activeClass);
		$(this).closest('.'+ app.themePanel.themeListItemCLass).addClass(app.themePanel.theme.activeClass);

		if (Cookies) {
			Cookies.set(app.themePanel.theme.cookieName, targetTheme);
			app.color.theme = getComputedStyle(document.body).getPropertyValue('--bs-theme');
			app.color.themeRgb = getComputedStyle(document.body).getPropertyValue('--bs-theme-rgb');
			$(document).trigger('theme-reload');
		}
	});

	if (Cookies) {
		if (Cookies.get(app.themePanel.theme.cookieName)) {
			$('.'+ app.themePanel.class +' ['+ app.themePanel.theme.toggleAttr +']' + '['+ app.themePanel.theme.classAttr +'="'+ Cookies.get(app.themePanel.theme.cookieName) +'"]').trigger('click');

			app.color.theme = getComputedStyle(document.body).getPropertyValue('--bs-theme');
			app.color.themeRgb = getComputedStyle(document.body).getPropertyValue('--bs-theme-rgb');

			$(document).trigger('theme-reload');
		}
	}


	// // 12.4 Theme Panel - Background Selector
	// $(document).on('click', '.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']', function(e) {
	// 	e.preventDefault();

	// 	for (var x = 0; x < document.documentElement.classList.length; x++) {
	// 		var targetClass = document.documentElement.classList[x];
	// 		if (targetClass.search('bg-cover-') > -1) {
	// 			$('html').removeClass(targetClass);
	// 		}
	// 	}

	// 	var targetTheme = $(this).attr(app.themePanel.themeCover.classAttr);

	// 	$('html').addClass(targetTheme);
	// 	$('.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']').not(this).closest('.'+ app.themePanel.themeCoverItemCLass).removeClass(app.themePanel.themeCover.activeClass);
	// 	$(this).closest('.'+ app.themePanel.themeCoverItemCLass).addClass(app.themePanel.themeCover.activeClass);

	// 	if (Cookies) {
	// 		Cookies.set(app.themePanel.themeCover.cookieName, targetTheme);
	// 	}
	// });

	// if (Cookies) {
	// 	if (Cookies.get(app.themePanel.themeCover.cookieName)) {
	// 		$('.'+ app.themePanel.class +' ['+ app.themePanel.themeCover.toggleAttr +']' + '['+ app.themePanel.themeCover.classAttr +'="'+ Cookies.get(app.themePanel.themeCover.cookieName) +'"]').trigger('click');
	// 	}
	// }
};

/* Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";

	return {
		//main function
		init: function () {
			this.initComponent();
			this.initSidebar();
		},
		initSidebar: function() {
			handleSidebarMenu();
			handleSidebarScrollMemory();
		},
		initComponent: function() {
			handleScrollbar();
			handleScrollToTopButton();
			handleScrollTo();
			handleCardAction();
			handelTooltipPopoverActivation();
			handlePageScrollClass();
			handleToggleClass();
			handleThemePanel();
		},
		scrollTop: function() {
			$('html, body, .content').animate({
				scrollTop: $('body').offset().top
			}, 0);
		}
	};
}();

$(document).ready(function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuVGVtcGxhdGUgTmFtZTogSFVEIC0gUmVzcG9uc2l2ZSBCb290c3RyYXAgNSBBZG1pbiBUZW1wbGF0ZVxuVmVyc2lvbjogMS4zLjBcbkF1dGhvcjogU2VhbiBOZ3VcbldlYnNpdGU6IGh0dHA6Ly93d3cuc2VhbnRoZW1lLmNvbS9odWQvXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRBUFBTIENPTlRFTlQgVEFCTEVcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdDwhLS0gPT09PT09PT0gR0xPQkFMIFNDUklQVCBTRVRUSU5HID09PT09PT09IC0tPlxuXHQwMS4gR2xvYmFsIFZhcmlhYmxlXG5cdDAyLiBIYW5kbGUgU2Nyb2xsYmFyXG5cdDAzLiBIYW5kbGUgSGVhZGVyIFNlYXJjaCBCYXJcblx0MDQuIEhhbmRsZSBTaWRlYmFyIE1lbnVcblx0MDUuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeVxuXHQwNi4gSGFuZGxlIFNpZGViYXIgTWluaWZ5IEZsb2F0IE1lbnVcblx0MDcuIEhhbmRsZSBEcm9wZG93biBDbG9zZSBPcHRpb25cblx0MDguIEhhbmRsZSBQYW5lbCAtIFJlbW92ZSAvIFJlbG9hZCAvIENvbGxhcHNlIC8gRXhwYW5kXG5cdDA5LiBIYW5kbGUgVG9vbHRpcCAmIFBvcG92ZXIgQWN0aXZhdGlvblxuXHQxMC4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uIEFjdGl2YXRpb25cblx0MTEuIEhhbmRsZSBoZXhUb1JnYmFcblx0MTIuIEhhbmRsZSBTY3JvbGwgdG9cblxuXHQ8IS0tID09PT09PT09IEFQUExJQ0FUSU9OIFNFVFRJTkcgPT09PT09PT0gLS0+XG5cdEFwcGxpY2F0aW9uIENvbnRyb2xsZXJcbiovXG5cblxuXG4vKiAwMS4gR2xvYmFsIFZhcmlhYmxlXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGFwcCA9IHtcblx0aWQ6ICcjYXBwJyxcblx0aXNNb2JpbGU6ICgoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB8fCB3aW5kb3cuaW5uZXJXaWR0aCA8IDk5MiksXG5cdGJvb3RzdHJhcDoge1xuXHRcdHRvb2x0aXA6IHtcblx0XHRcdGF0dHI6ICdkYXRhLWJzLXRvZ2dsZT1cInRvb2x0aXBcIidcblx0XHR9LFxuXHRcdHBvcG92ZXI6IHtcblx0XHRcdGF0dHI6ICdkYXRhLWJzLXRvZ2dsZT1cInBvcG92ZXJcIidcblx0XHR9LFxuXHRcdG1vZGFsOiB7XG5cdFx0XHRhdHRyOiAnZGF0YS1icy10b2dnbGU9XCJtb2RhbFwiJyxcblx0XHRcdGRpc21pc3NBdHRyOiAnZGF0YS1icy1kaXNtaXNzPVwibW9kYWxcIicsXG5cdFx0XHRldmVudDoge1xuXHRcdFx0XHRoaWRkZW46ICdoaWRkZW4uYnMubW9kYWwnXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRuYXY6IHtcblx0XHRcdGNsYXNzOiAnbmF2Jyxcblx0XHRcdHRhYnM6IHtcblx0XHRcdFx0Y2xhc3M6ICduYXYtdGFicycsXG5cdFx0XHRcdGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcblx0XHRcdFx0aXRlbUNsYXNzOiAnbmF2LWl0ZW0nLFxuXHRcdFx0XHRpdGVtTGlua0NsYXNzOiAnbmF2LWxpbmsnXG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRoZWFkZXI6IHtcblx0XHRpZDogJyNoZWFkZXInLFxuXHRcdGNsYXNzOiAnYXBwLWhlYWRlcicsXG5cdFx0aGFzU2Nyb2xsQ2xhc3M6ICdoYXMtc2Nyb2xsJ1xuXHR9LFxuXHRzaWRlYmFyOiB7XG5cdFx0aWQ6ICcjc2lkZWJhcicsXG5cdFx0Y2xhc3M6ICdhcHAtc2lkZWJhcicsXG5cdFx0c2Nyb2xsQmFyOiB7XG5cdFx0XHRsb2NhbFN0b3JhZ2U6ICdhcHBTaWRlYmFyU2Nyb2xsUG9zaXRpb24nLFxuXHRcdFx0ZG9tOiAnJ1xuXHRcdH0sXG5cdFx0bWVudToge1xuXHRcdFx0Y2xhc3M6ICdtZW51Jyxcblx0XHRcdGFuaW1hdGlvblRpbWU6IDAsXG5cdFx0XHRpdGVtQ2xhc3M6ICdtZW51LWl0ZW0nLFxuXHRcdFx0aXRlbUxpbmtDbGFzczogJ21lbnUtbGluaycsXG5cdFx0XHRoYXNTdWJDbGFzczogJ2hhcy1zdWInLFxuXHRcdFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxuXHRcdFx0ZXhwYW5kaW5nQ2xhc3M6ICdleHBhbmRpbmcnLFxuXHRcdFx0ZXhwYW5kQ2xhc3M6ICdleHBhbmQnLFxuXHRcdFx0c3VibWVudToge1xuXHRcdFx0XHRjbGFzczogJ21lbnUtc3VibWVudScsXG5cdFx0XHR9XG5cdFx0fSxcblx0XHRtb2JpbGU6IHtcblx0XHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cImFwcC1zaWRlYmFyLW1vYmlsZVwiJyxcblx0XHRcdGRpc21pc3NBdHRyOiAnZGF0YS1kaXNtaXNzPVwiYXBwLXNpZGViYXItbW9iaWxlXCInLFxuXHRcdFx0dG9nZ2xlZENsYXNzOiAnYXBwLXNpZGViYXItbW9iaWxlLXRvZ2dsZWQnLFxuXHRcdFx0Y2xvc2VkQ2xhc3M6ICdhcHAtc2lkZWJhci1tb2JpbGUtY2xvc2VkJyxcblx0XHRcdGJhY2tkcm9wOiB7XG5cdFx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItbW9iaWxlLWJhY2tkcm9wJ1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0bWluaWZ5OiB7XG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJhcHAtc2lkZWJhci1taW5pZnlcIicsXG5cdFx0XHR0b2dnbGVkQ2xhc3M6ICdhcHAtc2lkZWJhci1taW5pZmllZCcsXG5cdFx0XHRjb29raWVOYW1lOiAnYXBwLXNpZGViYXItbWluaWZpZWQnXG5cdFx0fSxcblx0XHRmbG9hdFN1Ym1lbnU6IHtcblx0XHRcdGlkOiAnI2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUnLFxuXHRcdFx0ZG9tOiAnJyxcblx0XHRcdHRpbWVvdXQ6ICcnLFxuXHRcdFx0Y2xhc3M6ICdhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51Jyxcblx0XHRcdGNvbnRhaW5lcjoge1xuXHRcdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtY29udGFpbmVyJ1xuXHRcdFx0fSxcblx0XHRcdGFycm93OiB7XG5cdFx0XHRcdGlkOiAnI2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtYXJyb3cnLFxuXHRcdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtYXJyb3cnXG5cdFx0XHR9LFxuXHRcdFx0bGluZToge1xuXHRcdFx0XHRpZDogJyNhcHAtc2lkZWJhci1mbG9hdC1zdWJtZW51LWxpbmUnLFxuXHRcdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLWZsb2F0LXN1Ym1lbnUtbGluZSdcblx0XHRcdH0sXG5cdFx0XHRvdmVyZmxvdzoge1xuXHRcdFx0XHRjbGFzczogJ292ZXJmbG93LXNjcm9sbCBtaC0xMDB2aCdcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNlYXJjaDoge1xuXHRcdFx0Y2xhc3M6ICdtZW51LXNlYXJjaCcsXG5cdFx0XHR0b2dnbGVBdHRyOiAnZGF0YS1zaWRlYmFyLXNlYXJjaD1cInRydWVcIicsXG5cdFx0XHRoaWRlQ2xhc3M6ICdkLW5vbmUnLFxuXHRcdFx0Zm91bmRDbGFzczogJ2hhcy10ZXh0J1xuXHRcdH0sXG5cdFx0dHJhbnNwYXJlbnQ6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXNpZGViYXItdHJhbnNwYXJlbnQnXG5cdFx0fVxuXHR9LFxuXHRzY3JvbGxCYXI6IHtcblx0XHRhdHRyOiAnZGF0YS1zY3JvbGxiYXI9XCJ0cnVlXCInLFxuXHRcdHNraXBNb2JpbGVBdHRyOiAnZGF0YS1za2lwLW1vYmlsZScsXG5cdFx0aW5pdEF0dHI6ICdkYXRhLWluaXQnLFxuXHRcdGhlaWdodEF0dHI6ICdkYXRhLWhlaWdodCcsXG5cdFx0d2hlZWxQcm9wYWdhdGlvbkF0dHI6ICdkYXRhLXdoZWVsLXByb3BhZ2F0aW9uJ1xuXHR9LFxuXHRjb250ZW50OiB7XG5cdFx0aWQ6ICcjY29udGVudCcsXG5cdFx0Y2xhc3M6ICdhcHAtY29udGVudCcsXG5cdFx0ZnVsbEhlaWdodDoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtY29udGVudC1mdWxsLWhlaWdodCdcblx0XHR9LFxuXHRcdGZ1bGxXaWR0aDoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtY29udGVudC1mdWxsLXdpZHRoJ1xuXHRcdH1cblx0fSxcblx0bGF5b3V0OiB7XG5cdFx0c2lkZWJhckxpZ2h0OiB7XG5cdFx0XHRjbGFzczogJ2FwcC13aXRoLWxpZ2h0LXNpZGViYXInXG5cdFx0fSxcblx0XHRzaWRlYmFyRW5kOiB7XG5cdFx0XHRjbGFzczogJ2FwcC13aXRoLWVuZC1zaWRlYmFyJ1xuXHRcdH0sXG5cdFx0c2lkZWJhcldpZGU6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtd2lkZS1zaWRlYmFyJ1xuXHRcdH0sXG5cdFx0c2lkZWJhck1pbmlmaWVkOiB7XG5cdFx0XHRjbGFzczogJ2FwcC1zaWRlYmFyLW1pbmlmaWVkJ1xuXHRcdH0sXG5cdFx0c2lkZWJhclR3bzoge1xuXHRcdFx0Y2xhc3M6ICdhcHAtd2l0aC10d28tc2lkZWJhcidcblx0XHR9LFxuXHRcdHdpdGhvdXRIZWFkZXI6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGhvdXQtaGVhZGVyJ1xuXHRcdH0sXG5cdFx0d2l0aG91dFNpZGViYXI6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGhvdXQtc2lkZWJhcidcblx0XHR9LFxuXHRcdHRvcE1lbnU6IHtcblx0XHRcdGNsYXNzOiAnYXBwLXdpdGgtdG9wLW1lbnUnXG5cdFx0fSxcblx0XHRib3hlZExheW91dDoge1xuXHRcdFx0Y2xhc3M6ICdib3hlZC1sYXlvdXQnXG5cdFx0fVxuXHR9LFxuXHRzY3JvbGxUb1RvcEJ0bjoge1xuXHRcdHNob3dDbGFzczogJ3Nob3cnLFxuXHRcdGhlaWdodFNob3c6IDIwMCxcblx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJzY3JvbGwtdG8tdG9wXCInLFxuXHRcdHNjcm9sbFNwZWVkOiA1MDBcblx0fSxcblx0c2Nyb2xsVG86IHtcblx0XHRhdHRyOiAnZGF0YS10b2dnbGU9XCJzY3JvbGwtdG9cIicsXG5cdFx0dGFyZ2V0OiAnZGF0YS10YXJnZXQnLFxuXHRcdGxpbmtUYXJnZXQ6ICdocmVmJ1xuXHR9LFxuXHQvLyB0aGVtZVBhbmVsOiB7XG5cdC8vIFx0Y2xhc3M6ICdhcHAtdGhlbWUtcGFuZWwnLFxuXHQvLyBcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZT1cInRoZW1lLXBhbmVsLWV4cGFuZFwiJyxcblx0Ly8gXHRjb29raWVOYW1lOiAnYXBwLXRoZW1lLXBhbmVsLWV4cGFuZCcsXG5cdC8vIFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxuXHQvLyBcdHRoZW1lTGlzdENMYXNzOiAnYXBwLXRoZW1lLWxpc3QnLFxuXHQvLyBcdHRoZW1lTGlzdEl0ZW1DTGFzczogJ2FwcC10aGVtZS1saXN0LWl0ZW0nLFxuXHQvLyBcdHRoZW1lQ292ZXJDbGFzczogJ2FwcC10aGVtZS1jb3ZlcicsXG5cdC8vIFx0dGhlbWVDb3Zlckl0ZW1DTGFzczogJ2FwcC10aGVtZS1jb3Zlci1pdGVtJyxcblx0Ly8gXHR0aGVtZToge1xuXHQvLyBcdFx0dG9nZ2xlQXR0cjogJ2RhdGEtdG9nZ2xlPVwidGhlbWUtc2VsZWN0b3JcIicsXG5cdC8vIFx0XHRjbGFzc0F0dHI6ICdkYXRhLXRoZW1lLWNsYXNzJyxcblx0Ly8gXHRcdGNvb2tpZU5hbWU6ICdhcHAtdGhlbWUnLFxuXHQvLyBcdFx0YWN0aXZlQ2xhc3M6ICdhY3RpdmUnXG5cdC8vIFx0fSxcblx0Ly8gXHR0aGVtZUNvdmVyOiB7XG5cdC8vIFx0XHR0b2dnbGVBdHRyOiAnZGF0YS10b2dnbGU9XCJ0aGVtZS1jb3Zlci1zZWxlY3RvclwiJyxcblx0Ly8gXHRcdGNsYXNzQXR0cjogJ2RhdGEtdGhlbWUtY292ZXItY2xhc3MnLFxuXHQvLyBcdFx0Y29va2llTmFtZTogJ2FwcC10aGVtZS1jb3ZlcicsXG5cdC8vIFx0XHRhY3RpdmVDbGFzczogJ2FjdGl2ZSdcblx0Ly8gXHR9XG5cdC8vIH0sXG5cdGRpc21pc3NDbGFzczoge1xuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLWRpc21pc3MtY2xhc3MnLFxuXHRcdHRhcmdldEF0dHI6ICdkYXRhLWRpc21pc3MtdGFyZ2V0J1xuXHR9LFxuXHR0b2dnbGVDbGFzczoge1xuXHRcdHRvZ2dsZUF0dHI6ICdkYXRhLXRvZ2dsZS1jbGFzcycsXG5cdFx0dGFyZ2V0QXR0cjogJ2RhdGEtdG9nZ2xlLXRhcmdldCdcblx0fSxcblx0Zm9udDoge1xuXHRcdGZhbWlseTogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWJvZHktZm9udC1mYW1pbHknKSxcblx0XHRzaXplOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtYm9keS1mb250LXNpemUnKSxcblx0XHR3ZWlnaHQ6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ib2R5LWZvbnQtd2VpZ2h0Jylcblx0fSxcblx0Y29sb3I6IHtcblx0XHR0aGVtZTogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXRoZW1lJyksXG5cdFx0Ymx1ZTogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWJsdWUnKSxcblx0XHRncmVlbjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyZWVuJyksXG5cdFx0b3JhbmdlOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtb3JhbmdlJyksXG5cdFx0cmVkOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtcmVkJyksXG5cdFx0Y3lhbjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWN5YW4nKSxcblx0XHRwdXJwbGU6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1wdXJwbGUnKSxcblx0XHR5ZWxsb3c6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy15ZWxsb3cnKSxcblx0XHRpbmRpZ286IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1pbmRpZ28nKSxcblx0XHRwaW5rOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtcGluaycpLFxuXHRcdGJsYWNrOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtYmxhY2snKSxcblx0XHR3aGl0ZTogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXdoaXRlJyksXG5cdFx0Z3JheTogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXknKSxcblx0XHRkYXJrOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZGFyaycpLFxuXHRcdGdyYXkxMDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTEwMCcpLFxuXHRcdGdyYXkyMDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTIwMCcpLFxuXHRcdGdyYXkzMDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTMwMCcpLFxuXHRcdGdyYXk0MDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTQwMCcpLFxuXHRcdGdyYXk1MDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTUwMCcpLFxuXHRcdGdyYXk2MDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTYwMCcpLFxuXHRcdGdyYXk3MDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTcwMCcpLFxuXHRcdGdyYXk4MDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTgwMCcpLFxuXHRcdGdyYXk5MDA6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTkwMCcpLFxuXG5cdFx0dGhlbWVSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZS1yZ2InKSxcblx0XHRibHVlUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtYmx1ZS1yZ2InKSxcblx0XHRncmVlblJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyZWVuLXJnYicpLFxuXHRcdG9yYW5nZVJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLW9yYW5nZS1yZ2InKSxcblx0XHRyZWRSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1yZWQtcmdiJyksXG5cdFx0Y3lhblJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWN5YW4tcmdiJyksXG5cdFx0cHVycGxlUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtcHVycGxlLXJnYicpLFxuXHRcdHllbGxvd1JnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXllbGxvdy1yZ2InKSxcblx0XHRpbmRpZ29SZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1pbmRpZ28tcmdiJyksXG5cdFx0cGlua1JnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXBpbmstcmdiJyksXG5cdFx0YmxhY2tSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ibGFjay1yZ2InKSxcblx0XHR3aGl0ZVJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXdoaXRlLXJnYicpLFxuXHRcdGdyYXlSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LXJnYicpLFxuXHRcdGRhcmtSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1kYXJrLXJnYicpLFxuXHRcdGdyYXkxMDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTEwMC1yZ2InKSxcblx0XHRncmF5MjAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZ3JheS0yMDAtcmdiJyksXG5cdFx0Z3JheTMwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktMzAwLXJnYicpLFxuXHRcdGdyYXk0MDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTQwMC1yZ2InKSxcblx0XHRncmF5NTAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZ3JheS01MDAtcmdiJyksXG5cdFx0Z3JheTYwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktNjAwLXJnYicpLFxuXHRcdGdyYXk3MDBSZ2I6IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy1ncmF5LTcwMC1yZ2InKSxcblx0XHRncmF5ODAwUmdiOiBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtZ3JheS04MDAtcmdiJyksXG5cdFx0Z3JheTkwMFJnYjogZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLWdyYXktOTAwLXJnYicpXG5cdH1cbn07XG5cblxuXG4vKiAwMi4gSGFuZGxlIFNjcm9sbGJhclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoYW5kbGVTY3JvbGxiYXIgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciBlbG1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnWycrIGFwcC5zY3JvbGxCYXIuYXR0ciArJ10nKTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGVsbXMubGVuZ3RoOyBpKyspIHtcblx0XHRnZW5lcmF0ZVNjcm9sbGJhcihlbG1zW2ldKVxuXHR9XG59O1xudmFyIGdlbmVyYXRlU2Nyb2xsYmFyID0gZnVuY3Rpb24oZWxtKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG5cdGlmICgkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLmluaXRBdHRyKSB8fCAoYXBwLmlzTW9iaWxlICYmICQoZWxtKS5hdHRyKGFwcC5zY3JvbGxCYXIuc2tpcE1vYmlsZUF0dHIpKSkge1xuXHRcdHJldHVybjtcblx0fVxuXHR2YXIgZGF0YUhlaWdodCA9ICghJChlbG0pLmF0dHIoYXBwLnNjcm9sbEJhci5oZWlnaHRBdHRyKSkgPyAkKGVsbSkuaGVpZ2h0KCkgOiAkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLmhlaWdodEF0dHIpO1xuXG5cdCQoZWxtKS5jc3MoJ2hlaWdodCcsIGRhdGFIZWlnaHQpO1xuXG5cdGlmKGFwcC5pc01vYmlsZSkge1xuXHRcdCQoZWxtKS5jc3MoJ292ZXJmbG93LXgnLCdzY3JvbGwnKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgZGF0YVdoZWVsUHJvcGFnYXRpb24gPSAoJChlbG0pLmF0dHIoYXBwLnNjcm9sbEJhci53aGVlbFByb3BhZ2F0aW9uQXR0cikpID8gJChlbG0pLmF0dHIoYXBwLnNjcm9sbEJhci53aGVlbFByb3BhZ2F0aW9uQXR0cikgOiBmYWxzZTtcblxuXHRcdGlmICgkKGVsbSkuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLmNsYXNzKS5sZW5ndGggIT09IDApIHtcblx0XHRcdGFwcC5zaWRlYmFyLnNjcm9sbEJhci5kb20gPSBuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcblx0XHRcdFx0d2hlZWxQcm9wYWdhdGlvbjogZGF0YVdoZWVsUHJvcGFnYXRpb25cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuZXcgUGVyZmVjdFNjcm9sbGJhcihlbG0sIHtcblx0XHRcdFx0d2hlZWxQcm9wYWdhdGlvbjogZGF0YVdoZWVsUHJvcGFnYXRpb25cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHQkKGVsbSkuYXR0cihhcHAuc2Nyb2xsQmFyLmluaXRBdHRyLCB0cnVlKTtcbn07XG5cblxuXG4vKiAwMy4gSGFuZGxlIFNpZGViYXIgTWVudVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoYW5kbGVTaWRlYmFyTWVudSA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyAuJysgYXBwLnNpZGViYXIubWVudS5jbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1DbGFzcyArJy4nKyBhcHAuc2lkZWJhci5tZW51Lmhhc1N1YkNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUxpbmtDbGFzcywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLm5leHQoJy4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MpO1xuXHRcdHZhciBvdGhlck1lbnUgPSAkKCcuJysgYXBwLnNpZGViYXIuY2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuY2xhc3MgKycgPiAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51LnN1Ym1lbnUuY2xhc3MpLm5vdCh0YXJnZXQpO1xuXG5cdFx0JChvdGhlck1lbnUpLnNsaWRlVXAoYXBwLnNpZGViYXIubWVudS5hbmltYXRpb25UaW1lKTtcblx0XHQkKG90aGVyTWVudSkuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzKS5yZW1vdmVDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcblxuXHRcdCQodGFyZ2V0KS5zbGlkZVRvZ2dsZShhcHAuc2lkZWJhci5tZW51LmFuaW1hdGlvblRpbWUpO1xuXHRcdHZhciB0YXJnZXRFbG0gPSAkKHRhcmdldCkuY2xvc2VzdCgnLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzKTtcblx0XHRpZiAoJCh0YXJnZXRFbG0pLmhhc0NsYXNzKGFwcC5zaWRlYmFyLm1lbnUuZXhwYW5kQ2xhc3MpKSB7XG5cdFx0XHQkKHRhcmdldEVsbSkucmVtb3ZlQ2xhc3MoYXBwLnNpZGViYXIubWVudS5leHBhbmRDbGFzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQodGFyZ2V0RWxtKS5hZGRDbGFzcyhhcHAuc2lkZWJhci5tZW51LmV4cGFuZENsYXNzKTtcblx0XHR9XG5cdH0pO1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLicrIGFwcC5zaWRlYmFyLmNsYXNzICsnIC4nKyBhcHAuc2lkZWJhci5tZW51LmNsYXNzICsnID4gLicrIGFwcC5zaWRlYmFyLm1lbnUuaXRlbUNsYXNzICsnLicrIGFwcC5zaWRlYmFyLm1lbnUuaGFzU3ViQ2xhc3MgKycgLicrIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcyArJyAuJysgYXBwLnNpZGViYXIubWVudS5pdGVtQ2xhc3MgKycuJysgYXBwLnNpZGViYXIubWVudS5oYXNTdWJDbGFzcyArJyA+IC4nKyBhcHAuc2lkZWJhci5tZW51Lml0ZW1MaW5rQ2xhc3MsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5uZXh0KCcuJyArIGFwcC5zaWRlYmFyLm1lbnUuc3VibWVudS5jbGFzcyk7XG5cdFx0JCh0YXJnZXQpLnNsaWRlVG9nZ2xlKGFwcC5zaWRlYmFyLm1lbnUuYW5pbWF0aW9uVGltZSk7XG5cdH0pO1xufTtcblxuXG5cbi8qIDA0LiBIYW5kbGUgU2lkZWJhciBTY3JvbGwgTWVtb3J5XG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVNpZGViYXJTY3JvbGxNZW1vcnkgPSBmdW5jdGlvbigpIHtcblx0aWYgKCFhcHAuaXNNb2JpbGUpIHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHR5cGVvZihTdG9yYWdlKSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mKGxvY2FsU3RvcmFnZSkgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdCQoJy4nKyBhcHAuc2lkZWJhci5jbGFzcyArJyBbJysgYXBwLnNjcm9sbEJhci5hdHRyICsnXScpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShhcHAuc2lkZWJhci5zY3JvbGxCYXIubG9jYWxTdG9yYWdlLCAkKHRoaXMpLnNjcm9sbFRvcCgpKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0dmFyIGRlZmF1bHRTY3JvbGwgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShhcHAuc2lkZWJhci5zY3JvbGxCYXIubG9jYWxTdG9yYWdlKTtcblx0XHRcdFx0aWYgKGRlZmF1bHRTY3JvbGwpIHtcblx0XHRcdFx0XHQkKCcuJysgYXBwLnNpZGViYXIuY2xhc3MgKycgWycrIGFwcC5zY3JvbGxCYXIuYXR0ciArJ10nKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiBkZWZhdWx0U2Nyb2xsICsgJ3B4J30sIDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9XG5cdH1cbn07XG5cblxuXG4vKiAwNS4gSGFuZGxlIENhcmQgQWN0aW9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGNhcmRBY3Rpb25SdW5uaW5nID0gZmFsc2U7XG52YXIgaGFuZGxlQ2FyZEFjdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRpZiAoY2FyZEFjdGlvblJ1bm5pbmcpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Y2FyZEFjdGlvblJ1bm5pbmcgPSB0cnVlO1xuXG5cdC8vIGV4cGFuZFxuXHQkKGRvY3VtZW50KS5vbignbW91c2VvdmVyJywgJ1tkYXRhLXRvZ2dsZT1jYXJkLWV4cGFuZF0nLCBmdW5jdGlvbihlKSB7XG5cdFx0aWYgKCEkKHRoaXMpLmF0dHIoJ2RhdGEtaW5pdCcpKSB7XG5cdFx0XHQkKHRoaXMpLnRvb2x0aXAoe1xuXHRcdFx0XHR0aXRsZTogJ0V4cGFuZCAvIENvbXByZXNzJyxcblx0XHRcdFx0cGxhY2VtZW50OiAnYm90dG9tJyxcblx0XHRcdFx0dHJpZ2dlcjogJ2hvdmVyJyxcblx0XHRcdFx0Y29udGFpbmVyOiAnYm9keSdcblx0XHRcdH0pO1xuXHRcdFx0JCh0aGlzKS50b29sdGlwKCdzaG93Jyk7XG5cdFx0XHQkKHRoaXMpLmF0dHIoJ2RhdGEtaW5pdCcsIHRydWUpO1xuXHRcdH1cblx0fSk7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS10b2dnbGU9Y2FyZC1leHBhbmRdJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5jbG9zZXN0KCcuY2FyZCcpO1xuXHRcdHZhciB0YXJnZXRCb2R5ID0gJCh0YXJnZXQpLmZpbmQoJy5jYXJkLWJvZHknKTtcblx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSAnY2FyZC1leHBhbmQnO1xuXHRcdHZhciB0YXJnZXRUb3AgPSA0MDtcblx0XHRpZiAoJCh0YXJnZXRCb2R5KS5sZW5ndGggIT09IDApIHtcblx0XHRcdHZhciB0YXJnZXRPZmZzZXRUb3AgPSAkKHRhcmdldCkub2Zmc2V0KCkudG9wO1xuXHRcdFx0dmFyIHRhcmdldEJvZHlPZmZzZXRUb3AgPSAkKHRhcmdldEJvZHkpLm9mZnNldCgpLnRvcDtcblx0XHRcdHRhcmdldFRvcCA9IHRhcmdldEJvZHlPZmZzZXRUb3AgLSB0YXJnZXRPZmZzZXRUb3A7XG5cdFx0fVxuXG5cdFx0aWYgKCQoJ2JvZHknKS5oYXNDbGFzcyh0YXJnZXRDbGFzcykgJiYgJCh0YXJnZXQpLmhhc0NsYXNzKHRhcmdldENsYXNzKSkge1xuXHRcdFx0JCgnYm9keSwgLmNhcmQnKS5yZW1vdmVDbGFzcyh0YXJnZXRDbGFzcyk7XG5cdFx0XHQkKCcuY2FyZCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG5cdFx0XHQkKHRhcmdldEJvZHkpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcyh0YXJnZXRDbGFzcyk7XG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkJykuYWRkQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdH1cblx0XHQkKHdpbmRvdykudHJpZ2dlcigncmVzaXplJyk7XG5cdH0pO1xufTtcblxuXG5cbi8qIDA2LiBIYW5kbGUgVG9vbHRpcCAmIFBvcG92ZXIgQWN0aXZhdGlvblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZhciBoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24gPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0aWYgKCQoJ1snKyBhcHAuYm9vdHN0cmFwLnRvb2x0aXAuYXR0ciArJ10nKS5sZW5ndGggIT09IDApIHtcblx0XHR2YXIgdG9vbHRpcFRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLmJvb3RzdHJhcC50b29sdGlwLmF0dHIgKyddJykpXG5cdFx0dmFyIHRvb2x0aXBMaXN0ID0gdG9vbHRpcFRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbiAodG9vbHRpcFRyaWdnZXJFbCkge1xuXHRcdFx0cmV0dXJuIG5ldyBib290c3RyYXAuVG9vbHRpcCh0b29sdGlwVHJpZ2dlckVsKVxuXHRcdH0pXG5cdH1cblx0aWYgKCQoJ1snKyBhcHAuYm9vdHN0cmFwLnBvcG92ZXIuYXR0ciArJ10nKS5sZW5ndGggIT09IDApIHtcblx0XHR2YXIgcG9wb3ZlclRyaWdnZXJMaXN0ID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJysgYXBwLmJvb3RzdHJhcC5wb3BvdmVyLmF0dHIgKyddJykpXG5cdFx0dmFyIHBvcG92ZXJMaXN0ID0gcG9wb3ZlclRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbiAocG9wb3ZlclRyaWdnZXJFbCkge1xuXHRcdFx0cmV0dXJuIG5ldyBib290c3RyYXAuUG9wb3Zlcihwb3BvdmVyVHJpZ2dlckVsKVxuXHRcdH0pXG5cdH1cbn07XG5cblxuXG4vKiAwNy4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVNjcm9sbFRvVG9wQnV0dG9uID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdCQoZG9jdW1lbnQpLnNjcm9sbCggZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHRvdGFsU2Nyb2xsID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCk7XG5cblx0XHRpZiAodG90YWxTY3JvbGwgPj0gYXBwLnNjcm9sbFRvVG9wQnRuLmhlaWdodFNob3cpIHtcblx0XHRcdGlmICghJCgnWycrIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsnXScpLmhhc0NsYXNzKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpKSB7XG5cdFx0XHRcdCQoJ1snKyBhcHAuc2Nyb2xsVG9Ub3BCdG4udG9nZ2xlQXR0ciArJ10nKS5hZGRDbGFzcyhhcHAuc2Nyb2xsVG9Ub3BCdG4uc2hvd0NsYXNzKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnWycrIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsnXScpLnJlbW92ZUNsYXNzKGFwcC5zY3JvbGxUb1RvcEJ0bi5zaG93Q2xhc3MpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnWycrIGFwcC5zY3JvbGxUb1RvcEJ0bi50b2dnbGVBdHRyICsnXScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0XHRzY3JvbGxUb3A6ICQoJ2JvZHknKS5vZmZzZXQoKS50b3Bcblx0XHR9LCBhcHAuc2Nyb2xsVG9Ub3BCdG4uc2Nyb2xsU3BlZWQpO1xuXHR9KTtcblxufTtcblxuXG5cbi8qIDA4LiBIYW5kbGUgaGV4VG9SZ2JhXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhleFRvUmdiYSA9IGZ1bmN0aW9uKGhleCwgdHJhbnNwYXJlbnQgPSAxKSB7XG5cdHZhciBjO1xuXHRpZigvXiMoW0EtRmEtZjAtOV17M30pezEsMn0kLy50ZXN0KGhleCkpe1xuXHRcdFx0Yz0gaGV4LnN1YnN0cmluZygxKS5zcGxpdCgnJyk7XG5cdFx0XHRpZihjLmxlbmd0aD09IDMpe1xuXHRcdFx0XHRcdGM9IFtjWzBdLCBjWzBdLCBjWzFdLCBjWzFdLCBjWzJdLCBjWzJdXTtcblx0XHRcdH1cblx0XHRcdGM9ICcweCcrYy5qb2luKCcnKTtcblx0XHRcdHJldHVybiAncmdiYSgnK1soYz4+MTYpJjI1NSwgKGM+PjgpJjI1NSwgYyYyNTVdLmpvaW4oJywnKSsnLCcrIHRyYW5zcGFyZW50ICsnKSc7XG5cdH1cbiAgdGhyb3cgbmV3IEVycm9yKCdCYWQgSGV4Jyk7XG59O1xuXG5cblxuLyogMDkuIEhhbmRsZSBTY3JvbGwgVG9cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG52YXIgaGFuZGxlU2Nyb2xsVG8gPSBmdW5jdGlvbigpIHtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAuc2Nyb2xsVG8uYXR0ciArJ10nLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0dmFyIHRhcmdldEVsbSA9ICgkKHRoaXMpLmF0dHIoYXBwLnNjcm9sbFRvLnRhcmdldCkpID8gJCh0aGlzKS5hdHRyKGFwcC5zY3JvbGxUby50YXJnZXQpIDogJCh0aGlzKS5hdHRyKGFwcC5zY3JvbGxUby5saW5rVGFyZ2V0KTtcblx0XHRpZiAodGFyZ2V0RWxtKSB7XG5cdFx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0XHRcdHNjcm9sbFRvcDogJCh0YXJnZXRFbG0pLm9mZnNldCgpLnRvcCAtICQoYXBwLmhlYWRlci5pZCkuaGVpZ2h0KCkgLSAyNFxuXHRcdFx0fSwgMCk7XG5cdFx0fVxuXHR9KTtcbn07XG5cblxuXG4vKiAxMC4gSGFuZGxlIFBhZ2UgU2Nyb2xsIENsYXNzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVBhZ2VTY3JvbGxDbGFzcyA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgY2hlY2tTY3JvbGwgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gMCkge1xuXHRcdFx0JChhcHAuaWQpLmFkZENsYXNzKGFwcC5oZWFkZXIuaGFzU2Nyb2xsQ2xhc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKGFwcC5pZCkucmVtb3ZlQ2xhc3MoYXBwLmhlYWRlci5oYXNTY3JvbGxDbGFzcyk7XG5cdFx0fVxuXHR9XG5cblx0JCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHRjaGVja1Njcm9sbCgpO1xuXHR9KTtcblxuXHRjaGVja1Njcm9sbCgpO1xufTtcblxuXG5cbi8qIDExLiBIYW5kbGUgVG9nZ2xlIENsYXNzXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVRvZ2dsZUNsYXNzID0gZnVuY3Rpb24oKSB7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbJysgYXBwLnRvZ2dsZUNsYXNzLnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHZhciB0YXJnZXRUb2dnbGVDbGFzcyA9ICQodGhpcykuYXR0cihhcHAudG9nZ2xlQ2xhc3MudG9nZ2xlQXR0cik7XG5cdFx0dmFyIHRhcmdldERpc21pc3NDbGFzcyA9ICQodGhpcykuYXR0cihhcHAuZGlzbWlzc0NsYXNzLnRvZ2dsZUF0dHIpO1xuXHRcdHZhciB0YXJnZXRUb2dnbGVFbG0gPSAkKHRoaXMpLmF0dHIoYXBwLnRvZ2dsZUNsYXNzLnRhcmdldEF0dHIpO1xuXG5cdFx0aWYgKCF0YXJnZXREaXNtaXNzQ2xhc3MpIHtcblx0XHRcdCQodGFyZ2V0VG9nZ2xlRWxtKS50b2dnbGVDbGFzcyh0YXJnZXRUb2dnbGVDbGFzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICghJCh0YXJnZXRUb2dnbGVFbG0pLmhhc0NsYXNzKHRhcmdldFRvZ2dsZUNsYXNzKSAmJiAhJCh0YXJnZXRUb2dnbGVFbG0pLmhhc0NsYXNzKHRhcmdldERpc21pc3NDbGFzcykpIHtcblx0XHRcdFx0JCh0YXJnZXRUb2dnbGVFbG0pLnRvZ2dsZUNsYXNzKHRhcmdldFRvZ2dsZUNsYXNzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQodGFyZ2V0VG9nZ2xlRWxtKS50b2dnbGVDbGFzcyh0YXJnZXRUb2dnbGVDbGFzcyk7XG5cdFx0XHRcdCQodGFyZ2V0VG9nZ2xlRWxtKS50b2dnbGVDbGFzcyh0YXJnZXREaXNtaXNzQ2xhc3MpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cblxuXG4vKiAxMi4gSGFuZGxlIFRoZW1lIFBhbmVsXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmFyIGhhbmRsZVRoZW1lUGFuZWwgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0Ly8gMTIuMSBUaGVtZSBQYW5lbCAtIFRvZ2dsZSAvIERpc21pc3Ncblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1snKyBhcHAudGhlbWVQYW5lbC50b2dnbGVBdHRyICsnXScsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0YXJnZXRDb250YWluZXIgPSAnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzO1xuXHRcdHZhciB0YXJnZXRFeHBhbmQgPSBmYWxzZTtcblxuXHRcdGlmICgkKHRhcmdldENvbnRhaW5lcikuaGFzQ2xhc3MoYXBwLnRoZW1lUGFuZWwuYWN0aXZlQ2xhc3MpKSB7XG5cdFx0XHQkKHRhcmdldENvbnRhaW5lcikucmVtb3ZlQ2xhc3MoYXBwLnRoZW1lUGFuZWwuYWN0aXZlQ2xhc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKHRhcmdldENvbnRhaW5lcikuYWRkQ2xhc3MoYXBwLnRoZW1lUGFuZWwuYWN0aXZlQ2xhc3MpO1xuXHRcdFx0dGFyZ2V0RXhwYW5kID0gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKENvb2tpZXMpIHtcblx0XHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLmNvb2tpZU5hbWUsIHRhcmdldEV4cGFuZCk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyAxMi4yIFRoZW1lIFBhbmVsIC0gUGFnZSBMb2FkIENvb2tpZXNcblx0aWYgKENvb2tpZXMpIHtcblx0XHR2YXIgdGhlbWVQYW5lbEV4cGFuZCA9IENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLmNvb2tpZU5hbWUpO1xuXG5cdFx0aWYgKHRoZW1lUGFuZWxFeHBhbmQgPT0gJ3RydWUnIHx8IHR5cGVvZiB0aGVtZVBhbmVsRXhwYW5kID09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHQkKCdbJysgYXBwLnRoZW1lUGFuZWwudG9nZ2xlQXR0ciArJ10nKS50cmlnZ2VyKCdjbGljaycpO1xuXHRcdH1cblx0fVxuXG5cblx0Ly8gMTIuMyBUaGVtZSBQYW5lbCAtIFRoZW1lIFNlbGVjdG9yXG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lLnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oKSB7XG5cblx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0Lmxlbmd0aDsgeCsrKSB7XG5cdFx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdFt4XTtcblx0XHRcdGlmICh0YXJnZXRDbGFzcy5zZWFyY2goJ3RoZW1lLScpID4gLTEpIHtcblx0XHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKHRhcmdldENsYXNzKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR2YXIgdGFyZ2V0VGhlbWUgPSAkKHRoaXMpLmF0dHIoYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyKTtcblxuXHRcdCQoJ2JvZHknKS5hZGRDbGFzcyh0YXJnZXRUaGVtZSk7XG5cdFx0JCgnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZS50b2dnbGVBdHRyICsnXScpLm5vdCh0aGlzKS5jbG9zZXN0KCcuJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0SXRlbUNMYXNzKS5yZW1vdmVDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZS5hY3RpdmVDbGFzcyk7XG5cdFx0JCh0aGlzKS5jbG9zZXN0KCcuJysgYXBwLnRoZW1lUGFuZWwudGhlbWVMaXN0SXRlbUNMYXNzKS5hZGRDbGFzcyhhcHAudGhlbWVQYW5lbC50aGVtZS5hY3RpdmVDbGFzcyk7XG5cblx0XHRpZiAoQ29va2llcykge1xuXHRcdFx0Q29va2llcy5zZXQoYXBwLnRoZW1lUGFuZWwudGhlbWUuY29va2llTmFtZSwgdGFyZ2V0VGhlbWUpO1xuXHRcdFx0YXBwLmNvbG9yLnRoZW1lID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJzLXRoZW1lJyk7XG5cdFx0XHRhcHAuY29sb3IudGhlbWVSZ2IgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtdGhlbWUtcmdiJyk7XG5cdFx0XHQkKGRvY3VtZW50KS50cmlnZ2VyKCd0aGVtZS1yZWxvYWQnKTtcblx0XHR9XG5cdH0pO1xuXG5cdGlmIChDb29raWVzKSB7XG5cdFx0aWYgKENvb2tpZXMuZ2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lLmNvb2tpZU5hbWUpKSB7XG5cdFx0XHQkKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lLnRvZ2dsZUF0dHIgKyddJyArICdbJysgYXBwLnRoZW1lUGFuZWwudGhlbWUuY2xhc3NBdHRyICsnPVwiJysgQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWUuY29va2llTmFtZSkgKydcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuXG5cdFx0XHRhcHAuY29sb3IudGhlbWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tYnMtdGhlbWUnKTtcblx0XHRcdGFwcC5jb2xvci50aGVtZVJnYiA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgnLS1icy10aGVtZS1yZ2InKTtcblxuXHRcdFx0JChkb2N1bWVudCkudHJpZ2dlcigndGhlbWUtcmVsb2FkJyk7XG5cdFx0fVxuXHR9XG5cblxuXHQvLyAvLyAxMi40IFRoZW1lIFBhbmVsIC0gQmFja2dyb3VuZCBTZWxlY3RvclxuXHQvLyAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLnRvZ2dsZUF0dHIgKyddJywgZnVuY3Rpb24oZSkge1xuXHQvLyBcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHQvLyBcdGZvciAodmFyIHggPSAwOyB4IDwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5sZW5ndGg7IHgrKykge1xuXHQvLyBcdFx0dmFyIHRhcmdldENsYXNzID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdFt4XTtcblx0Ly8gXHRcdGlmICh0YXJnZXRDbGFzcy5zZWFyY2goJ2JnLWNvdmVyLScpID4gLTEpIHtcblx0Ly8gXHRcdFx0JCgnaHRtbCcpLnJlbW92ZUNsYXNzKHRhcmdldENsYXNzKTtcblx0Ly8gXHRcdH1cblx0Ly8gXHR9XG5cblx0Ly8gXHR2YXIgdGFyZ2V0VGhlbWUgPSAkKHRoaXMpLmF0dHIoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jbGFzc0F0dHIpO1xuXG5cdC8vIFx0JCgnaHRtbCcpLmFkZENsYXNzKHRhcmdldFRoZW1lKTtcblx0Ly8gXHQkKCcuJysgYXBwLnRoZW1lUGFuZWwuY2xhc3MgKycgWycrIGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIudG9nZ2xlQXR0ciArJ10nKS5ub3QodGhpcykuY2xvc2VzdCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXJJdGVtQ0xhc3MpLnJlbW92ZUNsYXNzKGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIuYWN0aXZlQ2xhc3MpO1xuXHQvLyBcdCQodGhpcykuY2xvc2VzdCgnLicrIGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXJJdGVtQ0xhc3MpLmFkZENsYXNzKGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIuYWN0aXZlQ2xhc3MpO1xuXG5cdC8vIFx0aWYgKENvb2tpZXMpIHtcblx0Ly8gXHRcdENvb2tpZXMuc2V0KGFwcC50aGVtZVBhbmVsLnRoZW1lQ292ZXIuY29va2llTmFtZSwgdGFyZ2V0VGhlbWUpO1xuXHQvLyBcdH1cblx0Ly8gfSk7XG5cblx0Ly8gaWYgKENvb2tpZXMpIHtcblx0Ly8gXHRpZiAoQ29va2llcy5nZXQoYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jb29raWVOYW1lKSkge1xuXHQvLyBcdFx0JCgnLicrIGFwcC50aGVtZVBhbmVsLmNsYXNzICsnIFsnKyBhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLnRvZ2dsZUF0dHIgKyddJyArICdbJysgYXBwLnRoZW1lUGFuZWwudGhlbWVDb3Zlci5jbGFzc0F0dHIgKyc9XCInKyBDb29raWVzLmdldChhcHAudGhlbWVQYW5lbC50aGVtZUNvdmVyLmNvb2tpZU5hbWUpICsnXCJdJykudHJpZ2dlcignY2xpY2snKTtcblx0Ly8gXHR9XG5cdC8vIH1cbn07XG5cbi8qIEFwcGxpY2F0aW9uIENvbnRyb2xsZXJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIEFwcCA9IGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0cmV0dXJuIHtcblx0XHQvL21haW4gZnVuY3Rpb25cblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLmluaXRDb21wb25lbnQoKTtcblx0XHRcdHRoaXMuaW5pdFNpZGViYXIoKTtcblx0XHR9LFxuXHRcdGluaXRTaWRlYmFyOiBmdW5jdGlvbigpIHtcblx0XHRcdGhhbmRsZVNpZGViYXJNZW51KCk7XG5cdFx0XHRoYW5kbGVTaWRlYmFyU2Nyb2xsTWVtb3J5KCk7XG5cdFx0fSxcblx0XHRpbml0Q29tcG9uZW50OiBmdW5jdGlvbigpIHtcblx0XHRcdGhhbmRsZVNjcm9sbGJhcigpO1xuXHRcdFx0aGFuZGxlU2Nyb2xsVG9Ub3BCdXR0b24oKTtcblx0XHRcdGhhbmRsZVNjcm9sbFRvKCk7XG5cdFx0XHRoYW5kbGVDYXJkQWN0aW9uKCk7XG5cdFx0XHRoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24oKTtcblx0XHRcdGhhbmRsZVBhZ2VTY3JvbGxDbGFzcygpO1xuXHRcdFx0aGFuZGxlVG9nZ2xlQ2xhc3MoKTtcblx0XHRcdGhhbmRsZVRoZW1lUGFuZWwoKTtcblx0XHR9LFxuXHRcdHNjcm9sbFRvcDogZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCdodG1sLCBib2R5LCAuY29udGVudCcpLmFuaW1hdGUoe1xuXHRcdFx0XHRzY3JvbGxUb3A6ICQoJ2JvZHknKS5vZmZzZXQoKS50b3Bcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0fTtcbn0oKTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdEFwcC5pbml0KCk7XG59KTsiXX0=
